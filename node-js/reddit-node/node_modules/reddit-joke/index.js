var https = require('https');

exports.joke = function(max) {
	var url = 'https://www.reddit.com/r/Jokes.json?limit='+max;
	var req = https.get(url, function(response) {
		var json = '';
		response.on('data', function(chunk) {
			json += chunk;
		});
		response.on('end', function() {
			var redditResponse = JSON.parse(json);
			redditResponse.data.children.forEach(function(child) {
				if(child.data.domain === 'self.Jokes') {
					console.log(child.data.title + ' ' + child.data.selftext);
				}
			});
		});

		response.on('error', function(error) {
			console.log(error);
		});
	});
}
